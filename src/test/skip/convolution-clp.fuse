//func mmul(input: float[10*7*7], weights: float[2*10*3*3], output: float[2*5*5]) {
func mmul(input: float[490], weights: float[180], output: float[50]) {

  for (let n = 0..1) {
    for (let m = 0..9) {
      for (let r = 0..4) {
        for (let c = 0..4) {
	  for (let i = 0..2) unroll 3 {
	    for (let j = 0..2) unroll 3 {
	      let in_index  = m * 49 + ( r + i ) * 7 + ( c + j );
	      let w_index   = ( n * M + m ) * 9 + i * 3 + j;
	      let out_index = n * 25 + r * 5 + c;
	      output[ out_index ] := input[ in_index ] * weights[ w_index ] + output[ out_index ];
	    }
	  }
	}
      }
    }
  }

}

